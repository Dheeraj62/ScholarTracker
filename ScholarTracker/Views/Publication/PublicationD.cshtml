@model List<ScholarTracker.Models.Publication>

@{
    Layout = "~/Views/Shared/Layout3.cshtml";
}

<h2>Publication Details</h2>

@using (Html.BeginForm("Create", "Publication", FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    @Html.AntiForgeryToken()

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().JournalIndex)
        @Html.DropDownList("JournalIndex", new SelectList(new[] { "Select Index", "SCI", "Scopus" }), new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().JournalName)
        @Html.TextBox("JournalName", null, new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().Title)
        @Html.TextBox("Title", null, new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().Publisher)
        @Html.TextBox("Publisher", null, new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().ImpactFactor)
        @Html.TextBox("ImpactFactor", null, new { @type = "number", step = "0.01", @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().DateOfIssue)
        @Html.TextBox("DateOfIssue", null, new { @type = "date", @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().Volume)
        @Html.TextBox("Volume", null, new { @type = "number", @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().Issue)
        @Html.TextBox("Issue", null, new { @type = "number", @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().DOI)
        @Html.TextBox("DOI", null, new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        @Html.LabelFor(m => m.FirstOrDefault().PageNo)
        @Html.TextBox("PageNo", null, new { @class = "form-control", required = "required" })
    </div>

    <div class="form-group">
        <label>Upload File</label>
        <input type="file" name="PublicationFile" required />
    </div>

    <button type="submit" class="btn btn-primary">Add Publication</button>
}

<hr />

<h3>Submitted Publications</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Journal Index</th>
            <th>Title</th>
            <th>Publisher</th>
            <th>Impact Factor</th>
            <th>DOI</th>
            <th>Volume</th>
            <th>Issue</th>
            <th>Page No</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var pub in Model)
        {
            <tr>
                <td>@pub.JournalIndex</td>
                <td>@pub.Title</td>
                <td>@pub.Publisher</td>
                <td>@pub.ImpactFactor</td>
                <td>@pub.DOI</td>
                <td>@pub.Volume</td>
                <td>@pub.Issue</td>
                <td>@pub.PageNo</td>
                <td>
                    @Html.ActionLink("Edit", "Edit", new { id = pub.Id }, new { @class = "btn btn-sm btn-warning" })
                    @using (Html.BeginForm("Delete", "Publication", new { id = pub.Id }, FormMethod.Post))
                    {
                        @Html.AntiForgeryToken()
                        <button type="submit" class="btn btn-sm btn-danger" onclick="return confirm('Are you sure?')">Delete</button>
                    }
                </td>
            </tr>
        }
    </tbody>
</table>
